<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

    <title>Take Profit Calculator</title>
  </head>
  <body>

    <h5 class="m-3">fx Calculator pip</h5>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">pip:</label>
        <input type="number" class="form-control" id="pip" placeholder="">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">price:</label>
        <input type="number" class="form-control" id="price" placeholder="">
    </div>

    <button id="calc_pip_atas_bawah" class="btn btn-primary m-3">Calculate</button><br>

    <span class="mx-3">Atas = </span><span id="id_atas" style="font-weight: bold;"></span><br>
    <span class="mx-3">Bawah = </span><span id="id_bawah" style="font-weight: bold;"></span><br>

    <script>

        $( "#calc_pip_atas_bawah" ).click(function() {
            let pip = $('#pip').val();
            let price = $('#price').val();

            pip = parseFloat(pip);
            price = parseFloat(price);
            
            let ans_atas = price+pip;
            let ans_bawah = price-pip;

            out_atas = $('#id_atas').html(parseFloat(ans_atas));
            out_bawah = $('#id_bawah').html(parseFloat(ans_bawah));
        });

    </script>

    <hr>

    <h5 class="m-3">fx Calculator</h5>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">pip:</label>
        <input type="number" class="form-control" id="pip" placeholder="">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">vol:</label>
        <input type="number" class="form-control" id="vol" placeholder="">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">usd:</label>
        <input type="number" class="form-control" id="usd" placeholder="">
    </div>

    <button id="calc_pip" class="btn btn-primary m-3">Calculate</button><br>

    <span class="mx-3">pip = </span><span id="id_pip" style="font-weight: bold;"></span><br>
    <!-- <span class="mx-3">vol = </span><span id="id_vol" style="font-weight: bold;"></span><br> -->
    <span class="mx-3">usd = </span><span id="id_usd" style="font-weight: bold;"></span><br>

    <script>

        $( "#calc_pip" ).click(function() {
            let pip = $('#pip').val();
            let vol = $('#vol').val();
            let usd = $('#usd').val();
            

            pip = parseFloat(pip);
            vol = parseFloat(vol);
            usd = parseFloat(usd);
            
            let ans_usd = pip*(vol*100000);
            let ans_pip = usd/(vol*100000);

            out_pip = $('#id_pip').html(parseFloat(ans_pip));
            out_usd = $('#id_usd').html(parseFloat(ans_usd));
        });

    </script>

    <hr>



    <h5 class="m-3">Stock Calculator</h5>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Price now:</label>
        <input type="number" class="form-control" id="price_now" placeholder="50">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Price Before:</label>
        <input type="number" class="form-control" id="price_before" placeholder="50">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Total Share:</label>
        <input type="number" class="form-control" id="share" placeholder="50">
    </div>

    <button id="calc_stock" class="btn btn-primary m-3">Calculate</button><br>
    <span class="mx-3">Percent = </span><span id="out_percent" style="font-weight: bold;"></span><b> %</b><br>
    <span class="mx-3">Total Share Value before = RM </span><span id="out_result_before" style="font-weight: bold;"></span><br>
    <span class="mx-3">Total Share Value now = RM </span><span id="out_result" style="font-weight: bold;"></span><br>
    <span class="mx-3">Profit = RM </span><span id="out_profit" style="font-weight: bold;"></span><br><br>
    <span class="mx-3">Sell </span><span id="share_to_sell" style="font-weight: bold;">x</span> share, and take profit RM 
    <span id="profit_will_take" style="font-weight: bold;">x</span><br>
    <span class="mx-3">Share balance is </span>
    <span id="share_balance" style="font-weight: bold;">x</span> <br>

    <script>
        // ATR 2
        function formula_percent(price_now,price_before){
            let result_percent = ( (price_now / price_before * 100 ) ) - 100;
            return result_percent;
        }

        // function formula_profit(result_percent,share){
        //     let profit = (result_percent/100)*share;
        //     return profit;
        // }


        $( "#calc_stock" ).click(function() {
            let price_now = $('#price_now').val();
            let price_before = $('#price_before').val();
            let share = $('#share').val();
            
            let ans_formula_percent = formula_percent(parseFloat(price_now),parseFloat(price_before));
            let ans_result_before = parseFloat(share) * parseFloat(price_before);
            let ans_result_now = parseFloat(share) * parseFloat(price_now);
            let ans_formula_profit = parseFloat(ans_result_now) - parseFloat(ans_result_before);
            let ans_sell_n_take_profit = parseFloat(ans_formula_profit) / parseFloat(price_now);
            let ans_profit_will_take = Math.ceil(ans_sell_n_take_profit) * parseFloat(price_now);
            let ans_share_balance = share - Math.ceil(ans_sell_n_take_profit);
            
            let out_percent = $('#out_percent').html(ans_formula_percent.toFixed(2));
            let out_result_before = $('#out_result_before').html(ans_result_before.toFixed(2));
            let out_result = $('#out_result').html(ans_result_now.toFixed(2));
            let out_profit = $('#out_profit').html(ans_formula_profit.toFixed(2));
            let out_sell_n_take_profit = $('#share_to_sell').html(Math.ceil(ans_sell_n_take_profit));
            let out_profit_will_take = $('#profit_will_take').html(ans_profit_will_take.toFixed(2));
            let out_share_balance = $('#share_balance').html(ans_share_balance);
        });

    </script>

    <hr>

    <h5 class="m-3">ATR 2 Calculator (uptrend)</h5>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Original Price:</label>
        <input type="number" class="form-control" id="ori_price_2" placeholder="50">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Pagar Stop Loss:</label>
        <input type="number" class="form-control" id="pagar_stop_loss_2" placeholder="50">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">ATR:</label>
        <input type="number" class="form-control" id="atr_2" placeholder="50">
    </div>

    <button id="calc_atr_2" class="btn btn-primary m-3">Calculate</button><br>
    <span class="mx-3">TP = </span><span id="id_ans_tp_atr2" class=""></span><br>
    <span class="mx-3">SL = </span><span id="id_ans_sl_atr2" class=""></span>

    <script>
        // ATR 2
        function formula_tp_atr2(ori_price_2,atr_2){
            let tp_atr2 = ori_price_2+(atr_2*2);
            return tp_atr2;
        }

        function formula_sl_atr2(ori_price_2,pagar_stop_loss_2,atr_2){
            let beza = ori_price_2-pagar_stop_loss_2;
            let a = beza+atr_2;
            let sl_atr2 = ori_price_2-a;
            return sl_atr2;
        }


        $( "#calc_atr_2" ).click(function() {
            let ori_price_2 = $('#ori_price_2').val();
            let pagar_stop_loss_2 = $('#pagar_stop_loss_2').val();
            let atr_2 = $('#atr_2').val();
            
            let ans_tp_atr_2 = formula_tp_atr2(parseFloat(ori_price_2),parseFloat(atr_2));
            let ans_sl_atr_2 = formula_sl_atr2(parseFloat(ori_price_2),parseFloat(pagar_stop_loss_2),parseFloat(atr_2));
            
            let output_tp = $('#id_ans_tp_atr2').html(ans_tp_atr_2);
            let output_al = $('#id_ans_sl_atr2').html(ans_sl_atr_2);
        });

    </script>

    <hr>

    <h5 class="m-3">Take Profit Calculator</h5>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Original Price:</label>
        <input type="number" class="form-control" id="ori" placeholder="50">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Profit Percent:</label>
        <input type="number" class="form-control" id="percent" value="0.07">
    </div>

    <button id="calc" class="btn btn-primary m-3">Calculate</button>
    <h3 id="ans" class="m-3"></h3>


    <hr>
    

    <!-- <hr>

    <h5 class="m-3">ATR Calculator</h5>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">Original Price:</label>
        <input type="number" class="form-control" id="ori_atr" placeholder="50">
    </div>

    <div class="m-3">
        <label for="exampleFormControlInput1" class="form-label">ATR Value:</label>
        <input type="number" class="form-control" id="atr" value="0.3">
    </div>

    <button id="calc_atr" class="btn btn-primary m-3">Calculate</button><br>
    <span>ATAS = </span><span id="ans_atr_tambah" class="m-3"></span><br>
    <span>BAWAH = </span><span id="ans_atr_tolak" class="m-3"></span>

    <hr> -->
    


    <script>
        function formula(ori, percent){
            let stop_loss = ((percent)*(ori)/100)+ori;
            return stop_loss;
        }

        function tambah(ori_atr, atr){
            let jwpn = ori_atr + atr;
            return jwpn;
        }

        function tolak(ori_atr, atr){
            let jwpn = ori_atr - atr;
            return jwpn;
        }

        $( "#calc" ).click(function() {
            let ori = $('#ori').val();
            let percent = $('#percent').val();
            
            let ans = formula(parseFloat(ori),parseFloat(percent));
            console.log(ans);
            let output = $('#ans').html(ans);
        });

        $( "#calc_atr" ).click(function() {
            let ori = $('#ori_atr').val();
            let percent = $('#atr').val();
            
            let ans_tambah = tambah(parseFloat(ori),parseFloat(percent));
            let ans_tolak = tolak(parseFloat(ori),parseFloat(percent));
            console.log('atr_tambah = '+ ans_tambah);
            console.log('atr_tolak = '+ ans_tolak);
            let output_tambah = $('#ans_atr_tambah').html(ans_tambah);
            let output_tolak = $('#ans_atr_tolak').html(ans_tolak);
        });
        
    </script>


    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  </body>
</html>
